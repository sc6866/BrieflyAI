# ğŸ”„ æœåŠ¡å™¨æ›´æ–°æŒ‡å—

## é—®é¢˜ï¼šæœåŠ¡å™¨ä¸Šè¿˜æ˜¯æ—§ç‰ˆæœ¬

### åŸå› åˆ†æ

1. **ä»£ç æœªæ›´æ–°**ï¼šæœåŠ¡å™¨ä¸Šçš„ä»£ç æ²¡æœ‰ä» GitHub æ‹‰å–æœ€æ–°ç‰ˆæœ¬
2. **Docker ç¼“å­˜**ï¼šæ„å»ºæ—¶ä½¿ç”¨äº†æ—§çš„ç¼“å­˜é•œåƒ
3. **å®¹å™¨æœªé‡å¯**ï¼šè™½ç„¶ä»£ç æ›´æ–°äº†ï¼Œä½†å®¹å™¨è¿˜åœ¨è¿è¡Œæ—§ç‰ˆæœ¬

## âœ… å®Œæ•´æ›´æ–°æ­¥éª¤

### æ–¹æ³• 1ï¼šå®Œæ•´æ›´æ–°ï¼ˆæ¨èï¼‰

```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd /path/to/brieflyai  # æˆ–ä½ çš„é¡¹ç›®è·¯å¾„

# 2. åœæ­¢æ‰€æœ‰å®¹å™¨
docker-compose down

# 3. æ‹‰å–æœ€æ–°ä»£ç 
git pull origin main

# 4. æ¸…ç† Docker ç¼“å­˜ï¼ˆå¯é€‰ï¼Œä½†æ¨èï¼‰
docker system prune -f

# 5. é‡æ–°æ„å»ºï¼ˆä¸ä½¿ç”¨ç¼“å­˜ï¼‰
docker-compose build --no-cache

# 6. å¯åŠ¨æœåŠ¡
docker-compose up -d

# 7. æŸ¥çœ‹æ—¥å¿—ç¡®è®¤
docker-compose logs -f
```

### æ–¹æ³• 2ï¼šå¿«é€Ÿæ›´æ–°ï¼ˆå¦‚æœä»£ç å·²æ›´æ–°ï¼‰

```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd /path/to/brieflyai

# 2. æ‹‰å–æœ€æ–°ä»£ç 
git pull origin main

# 3. é‡æ–°æ„å»ºå¹¶é‡å¯
docker-compose up -d --build --force-recreate

# 4. æŸ¥çœ‹çŠ¶æ€
docker-compose ps
```

### æ–¹æ³• 3ï¼šä»…æ›´æ–°å‰ç«¯ï¼ˆå¦‚æœåªæ”¹äº†å‰ç«¯ä»£ç ï¼‰

```bash
# 1. æ‹‰å–æœ€æ–°ä»£ç 
git pull origin main

# 2. åªé‡æ–°æ„å»ºå‰ç«¯
docker-compose build --no-cache brieflyai

# 3. é‡å¯å‰ç«¯æœåŠ¡
docker-compose up -d --force-recreate brieflyai

# 4. æŸ¥çœ‹æ—¥å¿—
docker-compose logs briefly-ai-pro -f
```

## ğŸ” éªŒè¯æ›´æ–°æ˜¯å¦æˆåŠŸ

### æ£€æŸ¥ä»£ç ç‰ˆæœ¬

```bash
# æŸ¥çœ‹ Git æäº¤è®°å½•
git log --oneline -5

# æŸ¥çœ‹å½“å‰åˆ†æ”¯
git branch

# æŸ¥çœ‹è¿œç¨‹æ›´æ–°
git fetch
git status
```

### æ£€æŸ¥ Docker é•œåƒ

```bash
# æŸ¥çœ‹é•œåƒæ„å»ºæ—¶é—´
docker images | grep brieflyai

# æŸ¥çœ‹å®¹å™¨è¿è¡Œæ—¶é—´
docker ps --format "table {{.Names}}\t{{.Status}}\t{{.CreatedAt}}"
```

### æ£€æŸ¥åŠŸèƒ½

1. **è®¿é—®å‰ç«¯**ï¼š`http://æœåŠ¡å™¨IP:9527`
2. **æ£€æŸ¥æ–°åŠŸèƒ½**ï¼š
   - åˆ‡æ¢åˆ°"å…¨çƒè¶‹åŠ¿è„‰å†²"æ ‡ç­¾
   - æŸ¥çœ‹æ˜¯å¦æœ‰"åˆ·æ–°çƒ­ç‚¹"æŒ‰é’®
   - æµ‹è¯•å¼‚æ­¥åˆ·æ–°åŠŸèƒ½

## ğŸ› ï¸ å¸¸è§é—®é¢˜

### é—®é¢˜ 1ï¼šgit pull æ˜¾ç¤º "Already up to date"

**å¯èƒ½åŸå› **ï¼š
- æœåŠ¡å™¨ä¸Šçš„ä»£ç ç¡®å®æ˜¯æœ€æ–°çš„
- ä½† Docker é•œåƒä½¿ç”¨çš„æ˜¯æ—§ç‰ˆæœ¬

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# å¼ºåˆ¶é‡æ–°æ„å»ºï¼Œä¸ä½¿ç”¨ç¼“å­˜
docker-compose build --no-cache
docker-compose up -d --force-recreate
```

### é—®é¢˜ 2ï¼šæ„å»ºåè¿˜æ˜¯æ—§åŠŸèƒ½

**æ£€æŸ¥æ­¥éª¤**ï¼š
1. **ç¡®è®¤ä»£ç å·²æ›´æ–°**ï¼š
   ```bash
   git log --oneline -1
   # åº”è¯¥çœ‹åˆ°æœ€æ–°çš„æäº¤ï¼šfeat: Production release...
   ```

2. **ç¡®è®¤æ„å»ºæ—¶ä½¿ç”¨äº†æ–°ä»£ç **ï¼š
   ```bash
   # æŸ¥çœ‹æ„å»ºæ—¥å¿—ï¼Œç¡®è®¤æ²¡æœ‰ä½¿ç”¨ç¼“å­˜
   docker-compose build --no-cache brieflyai
   ```

3. **ç¡®è®¤å®¹å™¨å·²é‡å¯**ï¼š
   ```bash
   docker-compose ps
   # æŸ¥çœ‹ "Created" æ—¶é—´ï¼Œåº”è¯¥æ˜¯åˆšåˆšåˆ›å»ºçš„
   ```

### é—®é¢˜ 3ï¼šæµè§ˆå™¨ç¼“å­˜

**è§£å†³æ–¹æ¡ˆ**ï¼š
- å¼ºåˆ¶åˆ·æ–°æµè§ˆå™¨ï¼š`Ctrl + F5`ï¼ˆWindowsï¼‰æˆ– `Cmd + Shift + R`ï¼ˆMacï¼‰
- æˆ–æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
- æˆ–ä½¿ç”¨æ— ç—•æ¨¡å¼è®¿é—®

## ğŸ“ å®Œæ•´æ›´æ–°è„šæœ¬

åˆ›å»º `update.sh` æ–‡ä»¶ï¼š

```bash
#!/bin/bash
echo "ğŸ”„ å¼€å§‹æ›´æ–° BrieflyAI..."

# è¿›å…¥é¡¹ç›®ç›®å½•
cd "$(dirname "$0")"

# åœæ­¢æœåŠ¡
echo "â¹ï¸  åœæ­¢æœåŠ¡..."
docker-compose down

# æ‹‰å–æœ€æ–°ä»£ç 
echo "ğŸ“¥ æ‹‰å–æœ€æ–°ä»£ç ..."
git pull origin main

# é‡æ–°æ„å»ºï¼ˆä¸ä½¿ç”¨ç¼“å­˜ï¼‰
echo "ğŸ”¨ é‡æ–°æ„å»ºé•œåƒ..."
docker-compose build --no-cache

# å¯åŠ¨æœåŠ¡
echo "ğŸš€ å¯åŠ¨æœåŠ¡..."
docker-compose up -d

# æŸ¥çœ‹çŠ¶æ€
echo "ğŸ“Š æœåŠ¡çŠ¶æ€ï¼š"
docker-compose ps

echo "âœ… æ›´æ–°å®Œæˆï¼"
echo "ğŸŒ è®¿é—®åœ°å€ï¼šhttp://ä½ çš„æœåŠ¡å™¨IP:9527"
```

ä½¿ç”¨ï¼š
```bash
chmod +x update.sh
./update.sh
```

## ğŸ”„ è‡ªåŠ¨åŒ–æ›´æ–°ï¼ˆå¯é€‰ï¼‰

### ä½¿ç”¨ Cron å®šæ—¶æ›´æ–°

```bash
# ç¼–è¾‘ crontab
crontab -e

# æ·»åŠ æ¯å¤©å‡Œæ™¨ 3 ç‚¹è‡ªåŠ¨æ›´æ–°
0 3 * * * cd /path/to/brieflyai && git pull && docker-compose build --no-cache && docker-compose up -d
```

## ğŸ’¡ æœ€ä½³å®è·µ

1. **æ¯æ¬¡æ›´æ–°å‰å¤‡ä»½**ï¼š
   ```bash
   cp -r /path/to/brieflyai /path/to/brieflyai.backup
   ```

2. **ä½¿ç”¨ç‰ˆæœ¬æ ‡ç­¾**ï¼š
   ```bash
   git tag v1.0.0
   git push origin v1.0.0
   ```

3. **æŸ¥çœ‹æ›´æ–°æ—¥å¿—**ï¼š
   ```bash
   git log --oneline --since="1 week ago"
   ```

## ğŸ¯ å¿«é€Ÿæ£€æŸ¥æ¸…å•

- [ ] ä»£ç å·²æ›´æ–°ï¼ˆ`git pull`ï¼‰
- [ ] é‡æ–°æ„å»ºé•œåƒï¼ˆ`--no-cache`ï¼‰
- [ ] å®¹å™¨å·²é‡å¯ï¼ˆ`--force-recreate`ï¼‰
- [ ] æµè§ˆå™¨å·²æ¸…é™¤ç¼“å­˜
- [ ] æ–°åŠŸèƒ½å·²æµ‹è¯•
